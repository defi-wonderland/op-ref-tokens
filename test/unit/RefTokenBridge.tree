RefTokenBridgeUnit::constructor
└── When constructor is set
    └── It should initialize the L2 to L2 cross domain messenger

RefTokenBridgeUnit::send
├── When destination id is the block chain id
│   └── It should revert
├── When amount is zero
│   └── It should revert
├── When recipient is zero
│   └── It should revert
├── When destination chain id is zero
│   └── It should revert
├── When called with a native token first time
│   ├── It should emit TokensLocked
│   ├── It should emit MessageSent
│   ├── It should create the ref token
│   └── It should send the message to the L2 messenger
├── When calling with the native token any time after the creation of the ref token
│   ├── It should emit TokensLocked
│   ├── It should emit MessageSent
│   └── It should send the message to the L2 messenger
└── When called with a ref token
    ├── It should emit TokensBurned
    ├── It should emit MessageSent
    └── It should send the message to the L2 messenger

RefTokenBridgeUnit::sendAndExecute
├── When destination id is the block chain id
│   └── It should revert
├── When amount is zero
│   └── It should revert
├── When recipient is zero
│   └── It should revert
├── When destination chain id is zero
│   └── It should revert
├── When destination executor is zero
│   └── It should revert
├── When called with a native token first time
│   ├── It should emit TokensLocked
│   ├── It should emit MessageSent
│   ├── It should deploy the ref token
│   └── It should send the message to the L2 messenger
├── When called with a native token following successions
│   ├── It should emit TokensLocked
│   ├── It should emit MessageSent
│   └── It should send the message to the L2 messenger
└── When called with a ref token
    ├── It should emit TokensBurned
    ├── It should emit MessageSent
    └── It should send the message to the L2 messenger

RefTokenBridgeUnit::relay
├── When cross domain sender is not the ref token bridge and is not valid caller
│   └── It should revert
├── When sender is not the L2 to L2 cross domain messenger
│   └── It should revert
├── When called to relay the tokens to the native chain
│   ├── It should emit TokensUnlocked
│   ├── It should emit MessageRelayed
│   └── It should unlock the tokens to the user
├── When called to relay with a ref token and is not deployed and native token is sent
│   ├── It should emit TokensMinted
│   ├── It should emit MessageRelayed
│   └── It should mint the tokens to the user
├── When called to relay with a ref token and is not deployed and ref token is sent
│   ├── It should emit TokensMinted
│   ├── It should emit MessageRelayed
│   └── It should mint the tokens to the user
└── When called to relay with a ref token and is deployed
    ├── It should emit TokensMinted
    ├── It should emit MessageRelayed
    └── It should mint the tokens to the user

RefTokenBridgeUnit::relayAndExecute
├── When cross domain sender is not the ref token bridge and is not valid caller
│   └── It should revert
├── When sender is not the L2 to L2 cross domain messenger
│   └── It should revert
├── When called to relay and execute the tokens to the native chain
│   ├── It should emit Approval
│   ├── It should emit TokenMinted
│   ├── It should emit MessageRelayed
│   └── It should approve the tokens to the executor
├── When called to relay and execute with a ref token and is not deployed and native token is sent
│   ├── It should emit Approval
│   ├── It should emit TokenMinted
│   ├── It should emit MessageRelayed
│   └── It should approve the tokens to the executor
├── When called to relay and execute with a ref token and is not deployed and ref token is sent
│   ├── It should emit Approval
│   ├── It should emit TokenMinted
│   ├── It should emit MessageRelayed
│   └── It should approve the tokens to the executor
├── When called to relay and execute with a ref token and is deployed
│   ├── It should emit Approval
│   ├── It should emit TokenMinted
│   ├── It should emit MessageRelayed
│   └── It should approve the tokens to the executor
├── When called to relay and execute the tokens to the native chain and execution failed
│   ├── It should emit Approval
│   ├── It should emit TokenMinted
│   ├── It should emit TokenBurned
│   ├── It should emit Approval
│   ├── It should emit MessageSent
│   └── It should send message to refund the tokens
├── When called to relay and execute with a ref token and is not deployed and native token is sent and execution failed
│   ├── It should emit Approval
│   ├── It should emit TokenMinted
│   ├── It should emit TokenBurned
│   ├── It should emit Approval
│   ├── It should emit MessageSent
│   └── It should send message to refund the tokens
├── When called to relay and execute with a ref token and is not deployed and ref token is sent and execution failed
│   ├── It should emit Approval
│   ├── It should emit TokenMinted
│   ├── It should emit TokenBurned
│   ├── It should emit Approval
│   ├── It should emit MessageSent
│   └── It should send message to refund the tokens
└── When called to relay and execute with a ref token and is deployed and execution failed
    ├── It should emit Approval
    ├── It should emit TokenMinted
    ├── It should emit TokenBurned
    ├── It should emit Approval
    ├── It should emit MessageSent
    └── It should send message to refund the tokens

RefTokenBridgeUnit::unlock
├── When caller is not valid
│   └── It should revert
├── When called L2 to L2 Cross Domain Messenger
│   └── It should emit TokenUnlocked
│   └── It should transfer the tokens to user
└── When called token
    └── It should emit TokenUnlocked
    └── It should transfer the tokens to user